{% load staticfiles %}

{# Modals for each pin #}
{% for d in deployments %}
<div class="modal fade deployment-modal" id="{{ d.slug }}" tabindex="-1" role="dialog" aria-labelledby="{{ d.title }}" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title">{{ d.title }}<br/><small>{{ d.deployment_location }} - {{ d.lat_long }} - Age: {{ d.age_of_deployment }}</small></h4>
      </div>
      <div class="modal-body">
        <div class="row">
            <p>
              {{ d.description }}&nbsp;{% if d.guest_blog_post %}<a href="{{ d.guest_blog_post }}">Read more</a>{% endif %}
            </p>
            <ul>
              {% if d.linked_org_name %}
              <li>
                <strong>Deploying Organization:</strong> {{ d.linked_org_name|safe }}&nbsp;{% if d.organization_location %}based in {{ d.organization_location }} 
              {% endif %}
              </li>
              {% endif %}
              {% if d.num_students %}
              <li>
                <strong>Number of Students:</strong> {{ d.num_students }} 
              </li>
              {% endif %}
              {% if d.student_age_range %}
              <li>
                <strong>Age range:</strong> {{ d.student_age_range }} 
              </li>
              {% endif %}
              {% if d.num_kalite_servers %}
              <li>
                <strong># of KA Lite servers:</strong> {{ d.num_kalite_servers }} 
              </li>
              {% endif %}
              {% if d.server_os %}
              <li>
                <strong>Operating System(s):</strong> {{ d.server_os }} 
              </li>
              {% endif %}
              {% if d.hardware_setup %}
              <li>
                <strong>Hardware Setup:</strong> {{ d.hardware_setup }} 
              </li>
              {% endif %}
              {% if d.deployment_setting %}
              <li>
                <strong>Deployment Setting:</strong> {{ d.deployment_setting }} 
              </li>
              {% endif %}
              {% if d.pedagogical_model %}
              <li>
                <strong>Pedagogical Model:</strong> {{ d.pedagogical_model }} 
              </li>
              {% endif %}
            </ul>
            {% if d.photo_gallery %}
              <div id="carousel-{{ d.slug }}" class="carousel slide" data-ride="carousel">
                <!-- Indicators -->
                <ol class="carousel-indicators">
                  {% for counter in d.photo_gallery.photos.all %}
                    <li data-target="#carousel-{{ d.slug }}" data-slide-to="{{ forloop.counter0 }}" {% if forloop.first %}class="active"{% endif %}></li>
                  {% endfor %}
                </ol>
                <!-- Wrapper for slides --> 
                <div class="carousel-inner">
                  {% for p in d.photo_gallery.photos.all %}
                    <div class="item {% if forloop.first %}active{% endif %}">
                      <img src="{{ MEDIA_URL }}{{ p.picture }}" alt="{{ p.title }}" title="{{ p.title }}">
                      <div class="carousel-caption">
                       {{ p.caption }}    
                      </div>  
                    </div>
                  {% endfor %}
                </div>
                <!-- Controls --> 
                <a class="left carousel-control" href="#carousel-{{ d.slug }}" role="button" data-slide="prev">
                  <span class="glyphicon glyphicon-chevron-left"></span>
                </a>
                <a class="right carousel-control" href="#carousel-{{ d.slug }}" role="button" data-slide="next">
                  <span class="glyphicon glyphicon-chevron-right"></span>
                </a>
              </div>
            {% endif %}
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Request to connect</button>
      </div>
    </div>
  </div>
</div>
{% endfor %}